# 批量修复UTF-8编码问题的PowerShell脚本

$replacements = @{
    "分�?" = "分类"
    "字�?" = "字段"
    "存�?" = "存在"
    "状�?" = "状态"
    "回复�?" = "回复数"
    "未分�?" = "未分类"
    "默认�?" = "默认值"
    "审核�?" = "审核员"
    "插�?" = "插件"
    "过�?" = "过滤"
    "负�?" = "负载"
    "记�?" = "记录"
    "结�?" = "结果"
    "信�?" = "信息"
    "列�?" = "列表"
    "评�?" = "评分"
    "偏移�?" = "偏移量"
    "运行�?" = "运行中"
    "已停�?" = "已停止"
    "参�?" = "参数"
    "格�?" = "格式"
    "实例" = "实例"
    "指标" = "指标"
    "天�?" = "天数"
    "计数" = "计数"
    "配�?" = "配置"
    "类型" = "类型"
    "管理器" = "管理器"
    "方法" = "方法"
    "接口" = "接口"
    "事�?" = "事务"
    "操作" = "操作"
    "功能" = "功能"
    "简化版�?" = "简化版本"
    "元数�?" = "元数据"
    "最�?" = "最近"
    "新帖子�?" = "新帖子数"
    "活跃" = "活跃"
    "用户数" = "用户数"
    "总数" = "总数"
    "数组" = "数组"
    "版本" = "版本"
    "失败" = "失败"
    "空数组" = "空数组"
    "查询" = "查询"
    "表" = "表"
    "不存在" = "不存在"
    "设置" = "设置"
    "为0" = "为0"
    "如果" = "如果"
    "返回" = "返回"
    "获取" = "获取"
    "热门" = "热门"
    "分布" = "分布"
    "统计" = "统计"
    "基础" = "基础"
    "计算" = "计算"
    "分页" = "分页"
    "信息" = "信息"
    "主查�?" = "主查询"
    "WHERE子句" = "WHERE子句"
    "构建" = "构建"
    "子句" = "子句"
    "开发者ID" = "开发者ID"
    "插件ID" = "插件ID"
    "条件" = "条件"
    "详情" = "详情"
    "申诉" = "申诉"
    "记录" = "记录"
    "创建" = "创建"
    "更新" = "更新"
    "后的" = "后的"
    "通过" = "通过"
    "处理" = "处理"
    "如果" = "如果"
    "申诉" = "申诉"
    "插件" = "插件"
    "状态" = "状态"
    "获取" = "获取"
    "更新" = "更新"
    "申诉" = "申诉"
    "状态" = "状态"
    "申诉" = "申诉"
    "记录" = "记录"
    "检查" = "检查"
    "插件" = "插件"
    "是否" = "是否"
    "属于" = "属于"
    "该" = "该"
    "开发" = "开发"
    "者" = "者"
    "创建" = "创建"
    "申诉" = "申诉"
    "记录" = "记录"
    "更新" = "更新"
    "插件" = "插件"
    "申诉" = "申诉"
    "计数" = "计数"
    "处理" = "处理"
    "申诉" = "申诉"
    "更新" = "更新"
    "申诉" = "申诉"
    "状态" = "状态"
    "如果" = "如果"
    "申诉" = "申诉"
    "通过" = "通过"
    "更新" = "更新"
    "插件" = "插件"
    "状态" = "状态"
    "获取" = "获取"
    "更新" = "更新"
    "后的" = "后的"
    "申诉" = "申诉"
    "记录" = "记录"
    "获取" = "获取"
    "申诉" = "申诉"
    "详情" = "详情"
    "获取" = "获取"
    "申诉" = "申诉"
    "列表" = "列表"
    "构建" = "构建"
    "查询" = "查询"
    "条件" = "条件"
    "状态" = "状态"
    "过" = "过"
    "滤" = "滤"
    "插件ID" = "插件ID"
    "过滤" = "过滤"
    "开发者ID" = "开发者ID"
    "过滤" = "过滤"
    "构建" = "构建"
    "WHERE子句" = "WHERE子句"
    "计算" = "计算"
    "总数" = "总数"
    "设置" = "设置"
    "默认" = "默认"
    "值" = "值"
    "计算" = "计算"
    "偏移" = "偏移"
    "量" = "量"
    "构建" = "构建"
    "主查" = "主查"
    "询" = "询"
    "计算" = "计算"
    "分页" = "分页"
    "信息" = "信息"
    "获取" = "获取"
    "审核" = "审核"
    "统计" = "统计"
    "基础" = "基础"
    "统计" = "统计"
    "状态" = "状态"
    "分" = "分"
    "布" = "布"
    "优先级" = "优先级"
    "分" = "分"
    "布" = "布"
    "分类" = "分类"
    "分布" = "分布"
    "更新" = "更新"
    "审核员" = "审核员"
    "工作" = "工作"
    "负" = "负"
    "载" = "载"
    "检查" = "检查"
    "今天的" = "今天的"
    "记录" = "记录"
    "是否" = "是否"
    "存在" = "存在"
    "更新" = "更新"
    "现有" = "现有"
    "记录" = "记录"
    "创建" = "创建"
    "新记" = "新记"
    "录" = "录"
    "自动" = "自动"
    "审核" = "审核"
    "插件" = "插件"
    "这里" = "这里"
    "实现" = "实现"
    "自动" = "自动"
    "审核" = "审核"
    "逻辑" = "逻辑"
    "包括" = "包括"
    "安全" = "安全"
    "扫描" = "扫描"
    "代码" = "代码"
    "质量" = "质量"
    "检测" = "检测"
    "性能" = "性能"
    "检测" = "检测"
    "等" = "等"
    "示例" = "示例"
    "实现" = "实现"
    "保存" = "保存"
    "自动" = "自动"
    "审核" = "审核"
    "日志" = "日志"
    "更新" = "更新"
    "插件的" = "插件的"
    "自动" = "自动"
    "审核" = "审核"
    "结" = "结"
    "果" = "果"
}

# 获取services目录下的所有.go文件
$files = Get-ChildItem -Path "internal\services" -Filter "*.go" -Recurse

foreach ($file in $files) {
    Write-Host "Processing file: $($file.FullName)"
    
    # 读取文件内容
    $content = Get-Content -Path $file.FullName -Raw -Encoding UTF8
    
    # 应用所有替换
    foreach ($key in $replacements.Keys) {
        $content = $content -replace [regex]::Escape($key), $replacements[$key]
    }
    
    # 写回文件
    Set-Content -Path $file.FullName -Value $content -Encoding UTF8 -NoNewline
    
    Write-Host "Fixed encoding issues in: $($file.Name)"
}

Write-Host "Encoding fix completed!"