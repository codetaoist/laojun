# å¤ªä¸Šè€å›ä¸‰å¤§ä½“ç³»ç»Ÿä¸€å¼€å‘è®¡åˆ’ ğŸš€

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

åŸºäºç°æœ‰æ–‡æ¡£è§„åˆ’å’Œä»£ç åŸºç¡€ï¼Œå¯¹**æ’ä»¶å¸‚åœºä½“ç³»**ã€**æ’ä»¶ä½“ç³»**ã€**æ€»åå°ä½“ç³»**è¿›è¡Œæ•´ä½“æ€§å¼€å‘ï¼Œå½¢æˆå®Œæ•´çš„æ’ä»¶ç”Ÿæ€é—­ç¯ã€‚

## ğŸ¯ å¼€å‘ç›®æ ‡

### æ ¸å¿ƒç›®æ ‡
- **ç»Ÿä¸€æ¶æ„**: å»ºç«‹ä¸‰å¤§ä½“ç³»çš„ç»Ÿä¸€æŠ€æœ¯æ¶æ„å’Œæ•°æ®æ¨¡å‹
- **ä¸šåŠ¡é—­ç¯**: å®ç°ä»æ’ä»¶å¼€å‘åˆ°ä¸Šçº¿çš„å®Œæ•´ä¸šåŠ¡æµç¨‹
- **æ•°æ®åŒæ­¥**: ç¡®ä¿ä¸‰å¤§ä½“ç³»é—´çš„å®æ—¶æ•°æ®åŒæ­¥å’ŒçŠ¶æ€ä¸€è‡´
- **ç”¨æˆ·ä½“éªŒ**: æä¾›ç»Ÿä¸€çš„ç”¨æˆ·ç•Œé¢å’Œæ“ä½œä½“éªŒ

### æŠ€æœ¯ç›®æ ‡
- **é«˜å¯ç”¨**: 99.9% ç³»ç»Ÿå¯ç”¨æ€§
- **é«˜æ€§èƒ½**: æ”¯æŒ 10,000+ å¹¶å‘ç”¨æˆ·
- **å¯æ‰©å±•**: æ”¯æŒæ°´å¹³æ‰©å±•å’ŒåŠŸèƒ½æ‰©å±•
- **å®‰å…¨æ€§**: å®Œæ•´çš„å®‰å…¨é˜²æŠ¤å’Œæƒé™æ§åˆ¶

## ğŸ“Š å½“å‰çŠ¶æ€åˆ†æ

### 1. æ’ä»¶å¸‚åœºä½“ç³» (laojun-marketplace-api)
**å¼€å‘çŠ¶æ€**: ğŸŸ¡ åŸºç¡€æ¶æ„å®Œæˆï¼Œæ ¸å¿ƒåŠŸèƒ½å¾…å®ç°

**å·²å®Œæˆ**:
- âœ… åŸºç¡€é¡¹ç›®ç»“æ„å’Œé…ç½®
- âœ… æ•°æ®åº“è¿æ¥å’ŒåŸºç¡€æ¨¡å‹
- âœ… HTTP æœåŠ¡å™¨å’Œè·¯ç”±æ¡†æ¶
- âœ… åŸºç¡€ä¸­é—´ä»¶å’ŒæœåŠ¡å‘ç°

**å¾…å®ç°**:
- ğŸ”„ æ’ä»¶å±•ç¤ºå’Œæœç´¢åŠŸèƒ½
- ğŸ”„ ç”¨æˆ·è¯„ä»·å’Œè¯„åˆ†ç³»ç»Ÿ
- ğŸ”„ æ”¯ä»˜å¤„ç†å’Œè®¢å•ç®¡ç†
- ğŸ”„ å¼€å‘è€…ç®¡ç†å’Œæ”¶ç›Šåˆ†æˆ

### 2. æ’ä»¶ä½“ç³» (laojun-plugins)
**å¼€å‘çŠ¶æ€**: ğŸŸ¡ æ¡†æ¶æ­å»ºå®Œæˆï¼ŒSDKå’Œè¿è¡Œæ—¶å¾…å®Œå–„

**å·²å®Œæˆ**:
- âœ… åŸºç¡€é¡¹ç›®ç»“æ„
- âœ… æ’ä»¶ç®¡ç†å™¨æ¡†æ¶
- âœ… åŸºç¡€é…ç½®å’Œè·¯ç”±

**å¾…å®ç°**:
- ğŸ”„ æ’ä»¶å¼€å‘ SDK
- ğŸ”„ æ’ä»¶è¿è¡Œæ—¶ç¯å¢ƒ
- ğŸ”„ æ’ä»¶æ³¨å†Œä¸­å¿ƒ
- ğŸ”„ æ’ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†
- ğŸ”„ æ’ä»¶é€šä¿¡æœºåˆ¶

### 3. æ€»åå°ä½“ç³» (laojun-admin-api)
**å¼€å‘çŠ¶æ€**: ğŸŸ¢ åŸºç¡€åŠŸèƒ½è¾ƒå®Œæ•´ï¼Œéœ€è¦é›†æˆæ’ä»¶ç®¡ç†

**å·²å®Œæˆ**:
- âœ… å®Œæ•´çš„é¡¹ç›®ç»“æ„å’Œé…ç½®
- âœ… ç”¨æˆ·ç®¡ç†å’Œæƒé™æ§åˆ¶
- âœ… åŸºç¡€çš„ç³»ç»Ÿç®¡ç†åŠŸèƒ½
- âœ… æ•°æ®åº“å’Œç¼“å­˜é›†æˆ

**å¾…å®ç°**:
- ğŸ”„ æ’ä»¶å®¡æ ¸å·¥ä½œæµ
- ğŸ”„ æ’ä»¶ç®¡ç†ç•Œé¢
- ğŸ”„ å¼€å‘è€…è®¤è¯ç³»ç»Ÿ
- ğŸ”„ æ•°æ®ç»Ÿè®¡å’Œåˆ†æ

## ğŸ—ï¸ æ•´ä½“é›†æˆæ¶æ„

### ç³»ç»Ÿæ¶æ„å›¾

```mermaid
graph TB
    subgraph "å‰ç«¯å±‚"
        A[æ’ä»¶å¸‚åœºå‰ç«¯] 
        B[æ€»åå°å‰ç«¯]
        C[å¼€å‘è€…å·¥å…·]
    end
    
    subgraph "APIç½‘å…³å±‚"
        D[API Gateway]
    end
    
    subgraph "æœåŠ¡å±‚"
        E[æ’ä»¶å¸‚åœºAPI<br/>laojun-marketplace-api]
        F[æ€»åå°API<br/>laojun-admin-api] 
        G[æ’ä»¶ç³»ç»Ÿ<br/>laojun-plugins]
        H[å…±äº«æœåŠ¡<br/>laojun-shared]
    end
    
    subgraph "æ•°æ®å±‚"
        I[PostgreSQL<br/>ä¸»æ•°æ®åº“]
        J[Redis<br/>ç¼“å­˜å±‚]
        K[å¯¹è±¡å­˜å‚¨<br/>æ’ä»¶æ–‡ä»¶]
    end
    
    subgraph "åŸºç¡€è®¾æ–½"
        L[æœåŠ¡å‘ç°<br/>laojun-discovery]
        M[é…ç½®ä¸­å¿ƒ<br/>laojun-config-center]
        N[ç›‘æ§ç³»ç»Ÿ<br/>laojun-monitoring]
    end
    
    A --> D
    B --> D
    C --> D
    D --> E
    D --> F
    D --> G
    E --> H
    F --> H
    G --> H
    E --> I
    F --> I
    G --> I
    E --> J
    F --> J
    G --> J
    G --> K
    E --> L
    F --> L
    G --> L
    E --> M
    F --> M
    G --> M
    E --> N
    F --> N
    G --> N
```

### æ•°æ®æµè®¾è®¡

```mermaid
sequenceDiagram
    participant Dev as å¼€å‘è€…
    participant Market as æ’ä»¶å¸‚åœº
    participant Admin as æ€»åå°
    participant Plugin as æ’ä»¶ç³»ç»Ÿ
    participant User as ç”¨æˆ·
    
    Note over Dev,User: æ’ä»¶å¼€å‘åˆ°ä¸Šçº¿å®Œæ•´æµç¨‹
    
    Dev->>Plugin: 1. ä½¿ç”¨SDKå¼€å‘æ’ä»¶
    Dev->>Market: 2. æäº¤æ’ä»¶åˆ°å¸‚åœº
    Market->>Admin: 3. åŒæ­¥æ’ä»¶ä¿¡æ¯
    Admin->>Admin: 4. è‡ªåŠ¨+äººå·¥å®¡æ ¸
    Admin->>Market: 5. è¿”å›å®¡æ ¸ç»“æœ
    Market->>Dev: 6. é€šçŸ¥å¼€å‘è€…
    
    alt å®¡æ ¸é€šè¿‡
        Market->>Plugin: 7. å‘å¸ƒæ’ä»¶
        User->>Market: 8. æµè§ˆå’Œè´­ä¹°æ’ä»¶
        Market->>Plugin: 9. è§¦å‘æ’ä»¶å®‰è£…
        Plugin->>Admin: 10. åŒæ­¥å®‰è£…ç»Ÿè®¡
        Admin->>Dev: 11. ç»“ç®—æ”¶ç›Š
    end
```

## ğŸ› ï¸ æ ¸å¿ƒæ¥å£è§„èŒƒ

### 1. æ’ä»¶æ³¨å†Œæ¥å£

```http
POST /api/v1/plugins/register
Content-Type: application/json
Authorization: Bearer {developer_token}

{
  "name": "ç¤ºä¾‹æ’ä»¶",
  "version": "1.0.0",
  "description": "æ’ä»¶æè¿°",
  "category": "å·¥å…·ç±»",
  "tags": ["æ•ˆç‡", "å·¥å…·"],
  "manifest": {
    "entry": "main.js",
    "permissions": ["read", "write"],
    "dependencies": ["core@1.0.0"]
  },
  "package_url": "https://storage.example.com/plugin.zip",
  "checksum": "sha256:..."
}
```

### 2. æ’ä»¶å®¡æ ¸æ¥å£

```http
POST /api/v1/admin/plugins/{id}/review
Content-Type: application/json
Authorization: Bearer {admin_token}

{
  "status": "approved|rejected|pending",
  "reviewer_id": "uuid",
  "notes": "å®¡æ ¸æ„è§",
  "checklist": {
    "security_check": true,
    "code_quality": true,
    "functionality": true
  }
}
```

### 3. æ’ä»¶å®‰è£…æ¥å£

```http
POST /api/v1/plugins/{id}/install
Content-Type: application/json
Authorization: Bearer {user_token}

{
  "version": "1.0.0",
  "config": {
    "auto_update": true,
    "permissions": ["read"]
  }
}
```

## ğŸ“… å¼€å‘è·¯çº¿å›¾

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€è®¾æ–½å®Œå–„ (2-3å‘¨)

#### Week 1-2: æ ¸å¿ƒæœåŠ¡å®Œå–„
- **æ’ä»¶ç³»ç»Ÿ SDK å¼€å‘**
  - æ’ä»¶å¼€å‘æ¡†æ¶å’ŒAPI
  - æ’ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†
  - æ’ä»¶é€šä¿¡æœºåˆ¶
  
- **æ•°æ®æ¨¡å‹ç»Ÿä¸€**
  - ç»Ÿä¸€æ’ä»¶å…ƒæ•°æ®æ ¼å¼
  - è·¨æœåŠ¡æ•°æ®åŒæ­¥æœºåˆ¶
  - æ•°æ®åº“è¿ç§»è„šæœ¬

#### Week 3: æœåŠ¡é›†æˆ
- **API ç½‘å…³é…ç½®**
  - è·¯ç”±è§„åˆ™å’Œè´Ÿè½½å‡è¡¡
  - è®¤è¯å’Œæƒé™ä¸­é—´ä»¶
  - é™æµå’Œç†”æ–­æœºåˆ¶

- **æœåŠ¡å‘ç°é›†æˆ**
  - æœåŠ¡æ³¨å†Œå’Œå¥åº·æ£€æŸ¥
  - é…ç½®ä¸­å¿ƒé›†æˆ
  - ç›‘æ§æŒ‡æ ‡é‡‡é›†

### ç¬¬äºŒé˜¶æ®µï¼šæ ¸å¿ƒåŠŸèƒ½å®ç° (3-4å‘¨)

#### Week 4-5: æ’ä»¶å¸‚åœºæ ¸å¿ƒåŠŸèƒ½
- **æ’ä»¶å±•ç¤ºç³»ç»Ÿ**
  - æ’ä»¶åˆ—è¡¨å’Œè¯¦æƒ…é¡µé¢
  - æœç´¢å’Œç­›é€‰åŠŸèƒ½
  - åˆ†ç±»å’Œæ ‡ç­¾ç®¡ç†

- **ç”¨æˆ·ç³»ç»Ÿ**
  - ç”¨æˆ·æ³¨å†Œå’Œç™»å½•
  - ä¸ªäººä¸­å¿ƒå’Œè´­ä¹°å†å²
  - è¯„ä»·å’Œè¯„åˆ†ç³»ç»Ÿ

#### Week 6-7: æ€»åå°ç®¡ç†åŠŸèƒ½
- **æ’ä»¶å®¡æ ¸ç³»ç»Ÿ**
  - å®¡æ ¸å·¥ä½œæµå¼•æ“
  - å®¡æ ¸å‘˜åˆ†é…å’Œç®¡ç†
  - å®¡æ ¸å†å²å’Œç»Ÿè®¡

- **å¼€å‘è€…ç®¡ç†**
  - å¼€å‘è€…è®¤è¯å’Œç®¡ç†
  - æ”¶ç›Šåˆ†æˆå’Œç»“ç®—
  - æ•°æ®ç»Ÿè®¡å’Œåˆ†æ

### ç¬¬ä¸‰é˜¶æ®µï¼šé«˜çº§åŠŸèƒ½å’Œä¼˜åŒ– (2-3å‘¨)

#### Week 8-9: é«˜çº§åŠŸèƒ½
- **æ”¯ä»˜ç³»ç»Ÿé›†æˆ**
  - å¤šç§æ”¯ä»˜æ–¹å¼æ”¯æŒ
  - è®¢å•ç®¡ç†å’Œé€€æ¬¾
  - è´¢åŠ¡æŠ¥è¡¨å’Œå¯¹è´¦

- **æ¨èç³»ç»Ÿ**
  - ä¸ªæ€§åŒ–æ¨èç®—æ³•
  - çƒ­é—¨æ’ä»¶æ’è¡Œ
  - ç›¸å…³æ’ä»¶æ¨è

#### Week 10: æ€§èƒ½ä¼˜åŒ–å’Œæµ‹è¯•
- **æ€§èƒ½ä¼˜åŒ–**
  - æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
  - ç¼“å­˜ç­–ç•¥ä¼˜åŒ–
  - CDN å’Œé™æ€èµ„æºä¼˜åŒ–

- **æµ‹è¯•å’Œéƒ¨ç½²**
  - å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
  - å‹åŠ›æµ‹è¯•å’Œæ€§èƒ½æµ‹è¯•
  - ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

## ğŸ”§ æŠ€æœ¯å®ç°è¦ç‚¹

### 1. æ•°æ®åŒæ­¥æœºåˆ¶

```go
// äº‹ä»¶é©±åŠ¨çš„æ•°æ®åŒæ­¥
type PluginEvent struct {
    Type      string    `json:"type"`      // create, update, delete, review
    PluginID  string    `json:"plugin_id"`
    Data      any       `json:"data"`
    Timestamp time.Time `json:"timestamp"`
    Source    string    `json:"source"`    // marketplace, admin, plugins
}

// åŒæ­¥æœåŠ¡æ¥å£
type SyncService interface {
    PublishEvent(event PluginEvent) error
    SubscribeEvents(eventType string, handler EventHandler) error
    SyncPluginData(pluginID string, direction SyncDirection) error
}
```

### 2. æ’ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†

```go
// æ’ä»¶çŠ¶æ€æšä¸¾
type PluginStatus string

const (
    StatusDraft     PluginStatus = "draft"      // è‰ç¨¿
    StatusSubmitted PluginStatus = "submitted"  // å·²æäº¤
    StatusReviewing PluginStatus = "reviewing"  // å®¡æ ¸ä¸­
    StatusApproved  PluginStatus = "approved"   // å·²é€šè¿‡
    StatusRejected  PluginStatus = "rejected"   // å·²æ‹’ç»
    StatusPublished PluginStatus = "published"  // å·²å‘å¸ƒ
    StatusSuspended PluginStatus = "suspended"  // å·²æš‚åœ
)

// çŠ¶æ€è½¬æ¢è§„åˆ™
var StatusTransitions = map[PluginStatus][]PluginStatus{
    StatusDraft:     {StatusSubmitted},
    StatusSubmitted: {StatusReviewing, StatusDraft},
    StatusReviewing: {StatusApproved, StatusRejected},
    StatusApproved:  {StatusPublished, StatusRejected},
    StatusPublished: {StatusSuspended},
    StatusSuspended: {StatusPublished},
}
```

### 3. æƒé™æ§åˆ¶æ¨¡å‹

```yaml
# RBAC æƒé™æ¨¡å‹
roles:
  super_admin:
    permissions: ["*"]
  
  marketplace_admin:
    permissions:
      - "marketplace.*"
      - "plugin.manage"
      - "user.view"
  
  plugin_reviewer:
    permissions:
      - "plugin.review"
      - "plugin.view_queue"
      - "review.create"
  
  developer:
    permissions:
      - "plugin.create"
      - "plugin.update_own"
      - "plugin.view_own"
  
  user:
    permissions:
      - "plugin.view_public"
      - "plugin.install"
      - "review.create_own"
```

## ğŸ“ˆ æˆåŠŸæŒ‡æ ‡

### æŠ€æœ¯æŒ‡æ ‡
- **ç³»ç»Ÿå¯ç”¨æ€§**: â‰¥ 99.9%
- **å“åº”æ—¶é—´**: API å“åº”æ—¶é—´ < 200ms
- **å¹¶å‘å¤„ç†**: æ”¯æŒ 10,000+ å¹¶å‘ç”¨æˆ·
- **æ•°æ®ä¸€è‡´æ€§**: è·¨æœåŠ¡æ•°æ®åŒæ­¥å»¶è¿Ÿ < 1s

### ä¸šåŠ¡æŒ‡æ ‡
- **æ’ä»¶æ•°é‡**: ç›®æ ‡ 1000+ ä¸ªæ’ä»¶
- **å¼€å‘è€…æ•°é‡**: ç›®æ ‡ 500+ ä¸ªå¼€å‘è€…
- **ç”¨æˆ·æ´»è·ƒåº¦**: æ—¥æ´»ç”¨æˆ· > 5000
- **å®¡æ ¸æ•ˆç‡**: æ’ä»¶å®¡æ ¸å‘¨æœŸ < 3å¤©

## ğŸ“‹ ç›¸å…³æ–‡æ¡£

### æ ¸å¿ƒè®¾è®¡æ–‡æ¡£
- ğŸ“‹ **[æ’ä»¶ä¸šåŠ¡é—­ç¯å…¨æµç¨‹è®¾è®¡](PLUGIN_BUSINESS_FLOW.md)** - å®Œæ•´çš„æ’ä»¶ä¸šåŠ¡æµç¨‹è®¾è®¡ï¼ŒåŒ…å«å¼€å‘è€…æäº¤ã€å¸‚åœºå±•ç¤ºã€å®¡æ ¸å‘å¸ƒã€ä½¿ç”¨åœºæ™¯å’Œæ•°æ®ç»Ÿè®¡çš„è¯¦ç»†è§„èŒƒ
- ğŸ—ºï¸ **[å¼€å‘è·¯çº¿å›¾](../project/DEVELOPMENT_ROADMAP.md)** - è¯¦ç»†çš„10å‘¨å¼€å‘è®¡åˆ’å’Œé‡Œç¨‹ç¢‘
- ğŸ“Š **[æ’ä»¶æ•°æ®ç»Ÿè®¡åˆ†æ](../analytics/plugin-analytics.md)** - å®Œæ•´çš„æ•°æ®ç»Ÿè®¡åˆ†æç³»ç»Ÿè®¾è®¡

### æŠ€æœ¯æ–‡æ¡£
- ğŸ”— **[æ’ä»¶å¸‚åœºä¸æ€»åå°é›†æˆ](MARKETPLACE_INTEGRATION.md)** - ç³»ç»Ÿé—´é›†æˆæ–¹æ¡ˆ
- ğŸ—ï¸ **[ç³»ç»Ÿæ¶æ„è¯¦ç»†åˆ†æ](../architecture/DETAILED_ANALYSIS_REPORT.md)** - æŠ€æœ¯æ¶æ„æ·±åº¦åˆ†æ

### ä¸šåŠ¡æ–‡æ¡£
- ğŸª **[æ’ä»¶å¸‚åœºä¸šåŠ¡æµç¨‹](../../laojun-docs/marketplace/business-flow.md)** - å¸‚åœºä¸šåŠ¡æµç¨‹æ¦‚è¿°
- âœ… **[æ’ä»¶å®¡æ ¸ç³»ç»Ÿ](../../laojun-docs/marketplace/plugin-review-system.md)** - å®¡æ ¸ç³»ç»Ÿè®¾è®¡
- ğŸ’» **[å¼€å‘æŒ‡å—](../../laojun-workspace/docs/development-guide.md)** - é¡¹ç›®å¼€å‘æŒ‡å—

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³å¼€å§‹çš„ä»»åŠ¡

1. **å®Œå–„æ’ä»¶ SDK** (ä¼˜å…ˆçº§ï¼šé«˜)
   - è®¾è®¡æ’ä»¶å¼€å‘ API
   - å®ç°æ’ä»¶è¿è¡Œæ—¶ç¯å¢ƒ
   - åˆ›å»ºç¤ºä¾‹æ’ä»¶å’Œæ–‡æ¡£

2. **å®ç°æ•°æ®åŒæ­¥æœºåˆ¶** (ä¼˜å…ˆçº§ï¼šé«˜)
   - è®¾è®¡äº‹ä»¶é©±åŠ¨æ¶æ„
   - å®ç°è·¨æœåŠ¡æ•°æ®åŒæ­¥
   - å»ºç«‹æ•°æ®ä¸€è‡´æ€§ä¿è¯

3. **å¼€å‘æ’ä»¶å®¡æ ¸ç³»ç»Ÿ** (ä¼˜å…ˆçº§ï¼šä¸­)
   - å®ç°å®¡æ ¸å·¥ä½œæµå¼•æ“
   - å¼€å‘å®¡æ ¸å‘˜ç®¡ç†ç•Œé¢
   - é›†æˆè‡ªåŠ¨åŒ–å®¡æ ¸å·¥å…·

### æŠ€æœ¯å‡†å¤‡

1. **ç¯å¢ƒæ­å»º**
   - ç»Ÿä¸€å¼€å‘ç¯å¢ƒé…ç½®
   - CI/CD æµæ°´çº¿æ­å»º
   - æµ‹è¯•ç¯å¢ƒéƒ¨ç½²

2. **å›¢é˜Ÿåä½œ**
   - ä»£ç è§„èŒƒå’Œ Review æµç¨‹
   - é¡¹ç›®ç®¡ç†å’Œè¿›åº¦è·Ÿè¸ª
   - æŠ€æœ¯æ–‡æ¡£å’ŒçŸ¥è¯†åˆ†äº«

---

**é¡¹ç›®è´Ÿè´£äºº**: å¼€å‘å›¢é˜Ÿ  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2024å¹´12æœˆ  
**ä¸‹æ¬¡è¯„å®¡**: æ¯å‘¨äº”é¡¹ç›®ä¾‹ä¼š