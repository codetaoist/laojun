# Laojun å¤šä»“åº“åˆ†ç¦»ä¼ä¸šçº§æ–¹æ¡ˆ

## æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°äº† Laojun å¹³å°ä»å•ä½“ä»“åº“ï¼ˆMonorepoï¼‰å‘å¤šä»“åº“ï¼ˆMulti-repoï¼‰æ¶æ„è¿ç§»çš„ä¼ä¸šçº§æ–¹æ¡ˆã€‚è¯¥æ–¹æ¡ˆæ—¨åœ¨æé«˜ä»£ç ç®¡ç†æ•ˆç‡ã€å¢å¼ºæ¨¡å—ç‹¬ç«‹æ€§ã€ä¼˜åŒ–CI/CDæµç¨‹ï¼Œå¹¶ä¸ºå›¢é˜Ÿåä½œæä¾›æ›´å¥½çš„æ”¯æŒã€‚

## ç›®æ ‡æ¶æ„

### æ ¸å¿ƒä»“åº“ç»“æ„

```
laojun-ecosystem/
â”œâ”€â”€ laojun-shared/          # å…±äº«ç»„ä»¶åº“
â”œâ”€â”€ laojun-core/           # æ ¸å¿ƒæœåŠ¡
â”œâ”€â”€ laojun-marketplace/    # å¸‚åœºæœåŠ¡
â”œâ”€â”€ laojun-plugins/        # æ’ä»¶ç³»ç»Ÿ
â”œâ”€â”€ laojun-admin/          # ç®¡ç†åå°
â”œâ”€â”€ laojun-web/            # å‰ç«¯åº”ç”¨
â”œâ”€â”€ laojun-deploy/         # éƒ¨ç½²é…ç½®
â”œâ”€â”€ laojun-docs/           # æ–‡æ¡£ä¸­å¿ƒ
â””â”€â”€ laojun-workspace/      # å¼€å‘å·¥ä½œåŒºï¼ˆå¯é€‰ï¼‰
```

### ä»“åº“èŒè´£åˆ’åˆ†

#### 1. laojun-sharedï¼ˆå…±äº«ç»„ä»¶åº“ï¼‰
- **èŒè´£**: æä¾›è·¨æœåŠ¡çš„å…±äº«ç»„ä»¶ã€å·¥å…·ç±»ã€æ¨¡å‹å®šä¹‰
- **å†…å®¹**:
  - è®¤è¯æˆæƒæ¨¡å— (auth/)
  - é…ç½®ç®¡ç† (config/)
  - æ•°æ®åº“è¿æ¥ (database/)
  - ç¼“å­˜ç®¡ç† (cache/)
  - æ—¥å¿—ç³»ç»Ÿ (logger/)
  - ä¸­é—´ä»¶ (middleware/)
  - é€šç”¨æ¨¡å‹ (models/)
  - å·¥å…·å‡½æ•° (utils/)
  - å¥åº·æ£€æŸ¥ (health/)
  - æŒ‡æ ‡ç›‘æ§ (metrics/)
  - æµ‹è¯•å·¥å…· (testing/)

#### 2. laojun-coreï¼ˆæ ¸å¿ƒæœåŠ¡ï¼‰
- **èŒè´£**: æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å’ŒAPIæœåŠ¡
- **å†…å®¹**:
  - ç”¨æˆ·ç®¡ç†
  - æƒé™æ§åˆ¶
  - ç³»ç»Ÿé…ç½®
  - æ ¸å¿ƒAPIæ¥å£

#### 3. laojun-marketplaceï¼ˆå¸‚åœºæœåŠ¡ï¼‰
- **èŒè´£**: æ’ä»¶å¸‚åœºç›¸å…³åŠŸèƒ½
- **å†…å®¹**:
  - æ’ä»¶å±•ç¤º
  - æ’ä»¶ä¸‹è½½
  - è¯„ä»·ç³»ç»Ÿ
  - æ”¯ä»˜å¤„ç†

#### 4. laojun-pluginsï¼ˆæ’ä»¶ç³»ç»Ÿï¼‰
- **èŒè´£**: æ’ä»¶å¼€å‘æ¡†æ¶å’Œè¿è¡Œæ—¶
- **å†…å®¹**:
  - æ’ä»¶SDK
  - æ’ä»¶åŠ è½½å™¨
  - æ’ä»¶æ³¨å†Œä¸­å¿ƒ
  - æ’ä»¶å®‰å…¨ç®¡ç†

#### 5. laojun-adminï¼ˆç®¡ç†åå°ï¼‰
- **èŒè´£**: ç³»ç»Ÿç®¡ç†å’Œè¿ç»´åŠŸèƒ½
- **å†…å®¹**:
  - ç®¡ç†ç•Œé¢
  - ç³»ç»Ÿç›‘æ§
  - ç”¨æˆ·ç®¡ç†
  - æ’ä»¶å®¡æ ¸

#### 6. laojun-webï¼ˆå‰ç«¯åº”ç”¨ï¼‰
- **èŒè´£**: ç”¨æˆ·ç•Œé¢å’Œå‰ç«¯èµ„æº
- **å†…å®¹**:
  - ç”¨æˆ·å‰ç«¯
  - ç®¡ç†åå°å‰ç«¯
  - é™æ€èµ„æº

#### 7. laojun-deployï¼ˆéƒ¨ç½²é…ç½®ï¼‰
- **èŒè´£**: éƒ¨ç½²å’Œè¿ç»´é…ç½®
- **å†…å®¹**:
  - Dockeré…ç½®
  - Kubernetesé…ç½®
  - CI/CDæµæ°´çº¿
  - ç¯å¢ƒé…ç½®

#### 8. laojun-docsï¼ˆæ–‡æ¡£ä¸­å¿ƒï¼‰
- **èŒè´£**: é¡¹ç›®æ–‡æ¡£å’ŒAPIæ–‡æ¡£
- **å†…å®¹**:
  - æ¶æ„æ–‡æ¡£
  - APIæ–‡æ¡£
  - å¼€å‘æŒ‡å—
  - éƒ¨ç½²æ–‡æ¡£

## å½“å‰æ ¹ç›®å½•æ–‡ä»¶è§„åˆ’

### éœ€è¦è¿ç§»åˆ°å„ä»“åº“çš„æ–‡ä»¶/ç›®å½•

#### è¿ç§»åˆ° laojun-shared
- âœ… `repos/laojun-shared/` (å·²å­˜åœ¨ï¼Œéœ€è¦å®Œå–„)
- âŒ `pkg/shared/` (åºŸå¼ƒï¼Œå†…å®¹å·²åˆå¹¶åˆ°laojun-shared)

#### è¿ç§»åˆ° laojun-core
- âœ… `repos/laojun-core/` (å·²å­˜åœ¨)
- ğŸ“ `cmd/admin-api/` â†’ `laojun-core/cmd/admin-api/`
- ğŸ“ `cmd/config-center/` â†’ `laojun-core/cmd/config-center/`
- ğŸ“ `internal/` â†’ `laojun-core/internal/`

#### è¿ç§»åˆ° laojun-marketplace
- âœ… `repos/laojun-marketplace/` (å·²å­˜åœ¨)
- ğŸ“ `cmd/marketplace-api/` â†’ `laojun-marketplace/cmd/marketplace-api/`

#### è¿ç§»åˆ° laojun-plugins
- âœ… `repos/laojun-plugins/` (å·²å­˜åœ¨)
- ğŸ“ `pkg/plugins/` â†’ `laojun-plugins/pkg/`

#### è¿ç§»åˆ° laojun-admin
- ğŸ“ `web/admin/` â†’ `laojun-admin/web/`
- ğŸ“ `cmd/create-admin/` â†’ `laojun-admin/cmd/create-admin/`
- ğŸ“ `cmd/setup-super-admin/` â†’ `laojun-admin/cmd/setup-super-admin/`
- ğŸ“ `cmd/verify-super-admin/` â†’ `laojun-admin/cmd/verify-super-admin/`

#### è¿ç§»åˆ° laojun-web
- ğŸ“ `web/marketplace/` â†’ `laojun-web/marketplace/`
- ğŸ“ `api/` â†’ `laojun-web/api/`

#### è¿ç§»åˆ° laojun-deploy
- ğŸ“ `deploy/` â†’ `laojun-deploy/`
- ğŸ“ `configs/` â†’ `laojun-deploy/configs/`
- ğŸ“„ `Makefile` â†’ `laojun-deploy/Makefile`

#### è¿ç§»åˆ° laojun-docs
- ğŸ“ `docs/` â†’ `laojun-docs/`

### ä¿ç•™åœ¨å·¥ä½œåŒºçš„æ–‡ä»¶

#### å·¥ä½œåŒºç®¡ç†æ–‡ä»¶
- ğŸ“„ `go.work` (å·¥ä½œåŒºé…ç½®)
- ğŸ“„ `go.work.sum` (å·¥ä½œåŒºä¾èµ–é”å®š)
- ğŸ“„ `README.md` (å·¥ä½œåŒºè¯´æ˜)
- ğŸ“„ `.gitignore` (å·¥ä½œåŒºå¿½ç•¥è§„åˆ™)

#### å¼€å‘å·¥å…·å’Œè„šæœ¬
- ğŸ“ `tools/` (å¼€å‘å·¥å…·)
- ğŸ“ `tests/` (é›†æˆæµ‹è¯•)
- ğŸ“„ `update_imports.ps1` (è¿ç§»è„šæœ¬)

#### æ•°æ®å’Œä¸´æ—¶æ–‡ä»¶
- ğŸ“ `db/` (æ•°æ®åº“ç›¸å…³)
- ğŸ“ `uploads/` (ä¸Šä¼ æ–‡ä»¶)
- ğŸ“ `bin/` (ç¼–è¯‘è¾“å‡º)
- ğŸ“ `misc/` (æ‚é¡¹æ–‡ä»¶)
- ğŸ“ `etc/` (é…ç½®æ–‡ä»¶)

## è¿ç§»ç­–ç•¥

### é˜¶æ®µä¸€ï¼šå‡†å¤‡é˜¶æ®µï¼ˆ1-2å‘¨ï¼‰
1. **å®Œå–„å…±äº«ç»„ä»¶åº“**
   - âœ… ç»Ÿä¸€ `laojun-shared` ç»„ä»¶åº“
   - âœ… åºŸå¼ƒ `pkg/shared`
   - âœ… æ›´æ–°æ‰€æœ‰å¼•ç”¨

2. **åˆ›å»ºç‹¬ç«‹ä»“åº“**
   - åœ¨ç»„ç»‡ä¸‹åˆ›å»ºå„ä¸ªç‹¬ç«‹ä»“åº“
   - è®¾ç½®ä»“åº“æƒé™å’Œåˆ†æ”¯ä¿æŠ¤
   - é…ç½®CI/CDåŸºç¡€è®¾æ–½

### é˜¶æ®µäºŒï¼šæ ¸å¿ƒè¿ç§»ï¼ˆ2-3å‘¨ï¼‰
1. **è¿ç§»æ ¸å¿ƒæœåŠ¡**
   - è¿ç§» `laojun-core` ç›¸å…³ä»£ç 
   - è¿ç§» `laojun-marketplace` ç›¸å…³ä»£ç 
   - æ›´æ–°ä¾èµ–å…³ç³»

2. **è¿ç§»æ’ä»¶ç³»ç»Ÿ**
   - è¿ç§» `laojun-plugins` ç›¸å…³ä»£ç 
   - æ›´æ–°æ’ä»¶SDK

### é˜¶æ®µä¸‰ï¼šå‰ç«¯å’Œéƒ¨ç½²ï¼ˆ1-2å‘¨ï¼‰
1. **è¿ç§»å‰ç«¯åº”ç”¨**
   - è¿ç§»ç®¡ç†åå°åˆ° `laojun-admin`
   - è¿ç§»ç”¨æˆ·å‰ç«¯åˆ° `laojun-web`

2. **è¿ç§»éƒ¨ç½²é…ç½®**
   - è¿ç§»éƒ¨ç½²è„šæœ¬åˆ° `laojun-deploy`
   - æ›´æ–°CI/CDé…ç½®

### é˜¶æ®µå››ï¼šæ–‡æ¡£å’Œä¼˜åŒ–ï¼ˆ1å‘¨ï¼‰
1. **è¿ç§»æ–‡æ¡£**
   - è¿ç§»æ–‡æ¡£åˆ° `laojun-docs`
   - æ›´æ–°READMEå’Œæ¶æ„æ–‡æ¡£

2. **ä¼˜åŒ–å’Œæµ‹è¯•**
   - ç«¯åˆ°ç«¯æµ‹è¯•
   - æ€§èƒ½ä¼˜åŒ–
   - æ–‡æ¡£å®Œå–„

## æŠ€æœ¯å®æ–½ç»†èŠ‚

### ä¾èµ–ç®¡ç†
```go
// å„ä»“åº“çš„ go.mod ç¤ºä¾‹
module github.com/codetaoist/laojun-core

require (
    github.com/codetaoist/laojun-shared v1.0.0
    // å…¶ä»–ä¾èµ–...
)
```

### ç‰ˆæœ¬ç®¡ç†ç­–ç•¥
- **è¯­ä¹‰åŒ–ç‰ˆæœ¬**: æ‰€æœ‰ä»“åº“é‡‡ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬ (SemVer)
- **æ ‡ç­¾ç®¡ç†**: ä½¿ç”¨ Git æ ‡ç­¾ç®¡ç†ç‰ˆæœ¬å‘å¸ƒ
- **ä¾èµ–é”å®š**: ä½¿ç”¨ go.mod é”å®šä¾èµ–ç‰ˆæœ¬

### CI/CD æµæ°´çº¿
```yaml
# .github/workflows/ci.yml ç¤ºä¾‹
name: CI/CD Pipeline
on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-go@v3
        with:
          go-version: 1.21
      - run: go test ./...
      
  build:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - run: docker build -t laojun-core .
```

## å·¥ä½œåŒºé…ç½®

### å¼€å‘å·¥ä½œåŒº (laojun-workspace)
```
laojun-workspace/
â”œâ”€â”€ go.work                 # å·¥ä½œåŒºé…ç½®
â”œâ”€â”€ README.md              # å·¥ä½œåŒºè¯´æ˜
â”œâ”€â”€ scripts/               # å¼€å‘è„šæœ¬
â”‚   â”œâ”€â”€ setup.sh          # ç¯å¢ƒè®¾ç½®
â”‚   â”œâ”€â”€ build-all.sh      # æ‰¹é‡æ„å»º
â”‚   â””â”€â”€ test-all.sh       # æ‰¹é‡æµ‹è¯•
â”œâ”€â”€ tools/                 # å¼€å‘å·¥å…·
â”œâ”€â”€ tests/                 # é›†æˆæµ‹è¯•
â””â”€â”€ docs/                  # å¼€å‘æ–‡æ¡£
```

### go.work é…ç½®
```go
go 1.21

use (
    ./laojun-shared
    ./laojun-core
    ./laojun-marketplace
    ./laojun-plugins
    ./laojun-admin
)
```

## å›¢é˜Ÿåä½œæ¨¡å¼

### ä»£ç å®¡æŸ¥æµç¨‹
1. **åŠŸèƒ½åˆ†æ”¯**: æ¯ä¸ªåŠŸèƒ½åœ¨ç‹¬ç«‹åˆ†æ”¯å¼€å‘
2. **Pull Request**: é€šè¿‡PRè¿›è¡Œä»£ç å®¡æŸ¥
3. **è‡ªåŠ¨åŒ–æµ‹è¯•**: CI/CDè‡ªåŠ¨è¿è¡Œæµ‹è¯•
4. **ä»£ç è´¨é‡**: ä½¿ç”¨ä»£ç è´¨é‡æ£€æŸ¥å·¥å…·

### å‘å¸ƒæµç¨‹
1. **ç‰ˆæœ¬è§„åˆ’**: åˆ¶å®šç‰ˆæœ¬å‘å¸ƒè®¡åˆ’
2. **é›†æˆæµ‹è¯•**: åœ¨å·¥ä½œåŒºè¿›è¡Œé›†æˆæµ‹è¯•
3. **ç‰ˆæœ¬å‘å¸ƒ**: æŒ‰é¡ºåºå‘å¸ƒå„ä»“åº“ç‰ˆæœ¬
4. **éƒ¨ç½²éªŒè¯**: éªŒè¯éƒ¨ç½²ç»“æœ

## ç›‘æ§å’Œè¿ç»´

### ä»“åº“ç›‘æ§
- **ä¾èµ–æ›´æ–°**: ç›‘æ§ä¾èµ–ç‰ˆæœ¬æ›´æ–°
- **å®‰å…¨æ‰«æ**: å®šæœŸè¿›è¡Œå®‰å…¨æ¼æ´æ‰«æ
- **æ€§èƒ½ç›‘æ§**: ç›‘æ§æ„å»ºå’Œæµ‹è¯•æ€§èƒ½

### æ–‡æ¡£ç»´æŠ¤
- **APIæ–‡æ¡£**: è‡ªåŠ¨ç”Ÿæˆå’Œæ›´æ–°APIæ–‡æ¡£
- **æ¶æ„æ–‡æ¡£**: å®šæœŸæ›´æ–°æ¶æ„æ–‡æ¡£
- **å˜æ›´æ—¥å¿—**: ç»´æŠ¤è¯¦ç»†çš„å˜æ›´æ—¥å¿—

## é£é™©è¯„ä¼°å’Œç¼“è§£

### ä¸»è¦é£é™©
1. **ä¾èµ–å¤æ‚æ€§**: å¤šä»“åº“é—´ä¾èµ–å…³ç³»å¤æ‚
2. **ç‰ˆæœ¬å…¼å®¹æ€§**: ç‰ˆæœ¬å‡çº§å¯èƒ½å¯¼è‡´å…¼å®¹æ€§é—®é¢˜
3. **å¼€å‘æ•ˆç‡**: åˆæœŸå¯èƒ½å½±å“å¼€å‘æ•ˆç‡

### ç¼“è§£æªæ–½
1. **ä¾èµ–å›¾ç®¡ç†**: ä½¿ç”¨å·¥å…·å¯è§†åŒ–ä¾èµ–å…³ç³»
2. **è‡ªåŠ¨åŒ–æµ‹è¯•**: å®Œå–„çš„è‡ªåŠ¨åŒ–æµ‹è¯•è¦†ç›–
3. **æ¸è¿›å¼è¿ç§»**: åˆ†é˜¶æ®µé€æ­¥è¿ç§»
4. **å›æ»šè®¡åˆ’**: åˆ¶å®šè¯¦ç»†çš„å›æ»šè®¡åˆ’

## æˆåŠŸæŒ‡æ ‡

### æŠ€æœ¯æŒ‡æ ‡
- æ„å»ºæ—¶é—´å‡å°‘ 30%
- æµ‹è¯•æ‰§è¡Œæ—¶é—´å‡å°‘ 40%
- ä»£ç å¤ç”¨ç‡æé«˜ 50%

### å›¢é˜ŸæŒ‡æ ‡
- å¼€å‘æ•ˆç‡æå‡ 20%
- ä»£ç å®¡æŸ¥æ—¶é—´å‡å°‘ 25%
- å‘å¸ƒé¢‘ç‡æé«˜ 2å€

## æ€»ç»“

å¤šä»“åº“åˆ†ç¦»æ–¹æ¡ˆå°†æ˜¾è‘—æå‡ Laojun å¹³å°çš„å¯ç»´æŠ¤æ€§ã€å¯æ‰©å±•æ€§å’Œå›¢é˜Ÿåä½œæ•ˆç‡ã€‚é€šè¿‡åˆç†çš„ä»“åº“åˆ’åˆ†ã€å®Œå–„çš„å·¥å…·æ”¯æŒå’Œæ¸è¿›å¼çš„è¿ç§»ç­–ç•¥ï¼Œå¯ä»¥ç¡®ä¿è¿ç§»è¿‡ç¨‹çš„å¹³ç¨³è¿›è¡Œï¼Œå¹¶ä¸ºæœªæ¥çš„å‘å±•å¥ å®šåšå®åŸºç¡€ã€‚

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¥æœŸ**: 2024å¹´12æœˆ  
**æœ€åæ›´æ–°**: 2024å¹´12æœˆ  
**ç»´æŠ¤è€…**: Laojun æ¶æ„å›¢é˜Ÿ